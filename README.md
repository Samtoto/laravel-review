README

## 从 `/public/index.php` 入口
```php
// file:/public/index.php
require __DIR__.'/../vendor/autoload.php';
```

引入了 `autoload.php`

## 进入 `/vendor/autoload.php`

```php
<?php
// file:/local/vendor/autoload.php
// autoload.php @generated by Composer

require_once __DIR__ . '/composer/autoload_real.php';

return ComposerAutoloaderInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::getLoader();

```

引入了 `/vendor/composer/autoload_real.php`
并调用了 `getLoader` 方法

## 进入 `/vendor/composer/autoload_real.php`
```php
<?php

// autoload_real.php @generated by Composer

class ComposerAutoloaderInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e
{
    private static $loader;

    public static function loadClassLoader($class)
    {
        if ('Composer\Autoload\ClassLoader' === $class) {
            require __DIR__ . '/ClassLoader.php';
        }
    }


    /**
     * @return \Composer\Autoload\ClassLoader
     */
    public static function getLoader()
    {
        if (null !== self::$loader) {
            return self::$loader;
        }
        // 此时上面的if不会执行，因为 self::$loader 是空

        // 注册该 class 和 上面的 loadClassLoader
        spl_autoload_register(array('ComposerAutoloaderInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e', 'loadClassLoader'), true, true);
        // 赋值 由于 ClassLoader 并没有 __construct() 所以继续执行
        // 此时 $loader 为 ClassLoad 类
        self::$loader = $loader = new \Composer\Autoload\ClassLoader();
        // 解除注册
        spl_autoload_unregister(array('ComposerAutoloaderInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e', 'loadClassLoader'));
        // 此处判断为真 所以执行下面的 if 语句
        $useStaticLoader = PHP_VERSION_ID >= 50600 && !defined('HHVM_VERSION') && (!function_exists('zend_loader_file_encoded') || !zend_loader_file_encoded());
        if ($useStaticLoader) {
            // 引入 文件
            require_once __DIR__ . '/autoload_static.php';
            // 调用了 autoload_static.php 中的 ComposerStaticInit 的 getInitializer 方法 并将上面的 $loader 传入了进去。
            call_user_func(\Composer\Autoload\ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::getInitializer($loader));
        } else {} // else 不执行 就不复制了。
```

## 进入 `/vendor/composer/autoload_static.php` 

```php
<?php

// autoload_static.php @generated by Composer

namespace Composer\Autoload;

class ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e
{
    public static $files = array ();
    public static $prefixLengthsPsr4 = array ();
    public static $prefixDirsPsr4 = array ();
    public static $prefixesPsr0 = array ();
    public static $classMap = array ();
    
    // 以上五个变量，暂时没有用到，先折叠了。
    // 上面调用了该方法，功能是修改了$loader 的私有变量
    // 分别将本类(ComposerStaticInit)的四个变量，赋值给了 $loader
    // 这四个变量分别是 $prefixLengthsPsr4, $prefixDirsPsr4, $prefixesPsr0, $classMap
    public static function getInitializer(ClassLoader $loader)
    {
        return \Closure::bind(function () use ($loader) {
            $loader->prefixLengthsPsr4 = ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::$prefixLengthsPsr4;
            $loader->prefixDirsPsr4 = ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::$prefixDirsPsr4;
            $loader->prefixesPsr0 = ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::$prefixesPsr0;
            $loader->classMap = ComposerStaticInit53e7e9fbc7f3b93c224f3bd5f4f6ec3e::$classMap;

        }, null, ClassLoader::class);
    }
}
```
Closure 的用法实例，可以[参考这里](https://github.com/Samtoto/laravel-review/blob/master/Clousure%20%E7%94%A8%E6%B3%95%20%E5%AE%9E%E4%BE%8B1.md)
此时 $loader 的四个私有变量值已经改变。

为什么这里不用setVal() 方法呢？比如：
```php
class Foo ()
{
    private $val;
    
    public function setVal($val)
    {
        $this->val = $val;
    }
}
```
